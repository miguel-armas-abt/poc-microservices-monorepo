name: invoice-v1

container:
  image:
    repository: miguelarmasabt/invoice
    tag: "v1.0.1"
  port: 8014
  variables:
    config-map:
      KAFKA_DOMAIN: "kafka-server:9093"
      POSTGRESQL_DOMAIN: "postgres-db:5432"
      POSTGRESQL_USERNAME: "poc_user"
      PRODUCT_DOMAIN: "product-v1:8017"
      CONFIG_SERVER_DOMAIN: "config-server-v1:8888"
      JAVA_OPTS: "-Xms256M -Xmx256M"
    secrets:
      POSTGRESQL_PASSWORD: "qwerty"
  compose:
    host-port: 8014
    volumes: none
    dependencies: config-server-v1;postgres-db;kafka-server

k8s:
  helm-template: HEALTHY
  namespace: restaurant
  image-pull-policy: IfNotPresent
  service:
    node-port: 30014
  deployment:
    replicas: 1
    container-resources:
      requests:
        memory: "256Mi"
        cpu: "500m"
      limits:
        memory: "512Mi"
        cpu: "1"
  hpa:
    enabled: true
    min-replicas: 1
    max-replicas: 2
    cpu:
      target-average-utilization: 80
    memory:
      target-average-utilization: 70
  liveness-probe:
    path: /actuator/health/liveness
    port: 8014
    initial-delay-seconds: 60
    period-seconds: 30
    timeout-seconds: 5
    failure-threshold: 3
  readiness-probe:
    path: /actuator/health/readiness
    port: 8014
    initial-delay-seconds: 60
    period-seconds: 30
